# Use the official Directus 11 image as the base
FROM directus/directus:11.5.1

# Switch to root user to install dependencies
USER root

# Install git
RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*

# Enable corepack for pnpm
RUN corepack enable

# Switch back to node user for installing extensions
USER node

# Install the Directus extension (replace with your extension)
RUN pnpm install directus-extension-package-name