The PRH Issue
After we deployed PRH around 11 PM IST, we received a ping from the product team regarding an issue. There was a problem where a private document was appearing on the website but not on PRH. Upon investigation, we found that the sync to PRH was not being initiated. The SQS was not getting invoked. As we dug deeper, we discovered that the DNS used to call SQS from the BRApp sync was incorrect. We corrected this, and the sync worked as expected.
For the second issue where a private document appeared on the website, it is important to note that it was not an actual document but rather a document with strange content. Upon investigating this, we found that the Logstash sync was functioning correctly with no logical issues. However, some documents were somehow being updated with version 2, and this version 2 would set the status to active instead of the expected status, which is deleted. We have opened an AWS support ticket to address this issue.