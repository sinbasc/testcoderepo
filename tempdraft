The Serverless Framework determines the Node.js version (runtime) for the custom resource Lambda handler (e.g., --custom-resource-apigw-cw-role) by hardcoding it within the framework’s source code, specifically in the lib/plugins/aws/custom-resources/index.js file. 25 36 This handler is automatically created when you enable API Gateway CloudWatch logging via the provider.logs.restApi configuration in your serverless.yml. 21 Older versions of the framework used Node.js 14.x (or later 16.x) for this, which can cause creation failures now since AWS Lambda deprecated Node.js 14.x—blocking new function creation as of January 2024 and updates shortly after. 14 18 19
To resolve the error, update to the latest Serverless Framework version (v4.x or higher as of July 2025), where all custom resource handlers have been upgraded to use the nodejs20.x runtime. 36 Run npm install -g serverless (or update via yarn/pnpm if preferred) and redeploy. If you’re pinned to an older framework version and can’t upgrade, manually patch the runtime in the mentioned index.js file to nodejs20.x before deployment. 25 20
