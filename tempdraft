fields @timestamp, @message
| filter @message like /\/a\/b\/c\/.*/
| parse @message /\/a\/b\/c\/(?<variable>[^\s]+)/
| filter variable == "xyz"
| sort @timestamp asc
| stats count() as errorCount by bin(4m)
| filter errorCount > 0
| fields @timestamp, @message
| filter @message like /error/
| filter timestamp < @timestamp + 240000 and timestamp > @timestamp
